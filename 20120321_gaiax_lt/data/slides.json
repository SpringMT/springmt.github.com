var import_slides = 
[
  {'slide' : '<article><h1 id="apachenginx--passengerunicorn-">「apache,nginx × passenger,unicornのベンチをとってみた」+ デザート</h1><ul>  <li>2012/03/21</li>  <li>    <p>@Spring_MT</p>  </li>  <li><strong>ツッコミは随時入れてください！！！</strong></li></ul></article>'},
  {'slide' : '<article><h3 id="section">自己紹介</h3><ul>  <li><strong>名前</strong>    <ul>      <li>春山 誠</li>      <li>twitter id : @Spring_MT <image style="height: 50px" src="images/tiwtter_logo.jpg" /></li>    </ul>  </li>  <li><strong>経歴</strong>    <ul>      <li>2008/4 〜 2012/1 <strong>DeNA</strong>        <ul>          <li>2008〜2010までは「みんなのウェディング」で企画</li>          <li>2010〜はyahoo-mobage でエンジニア</li>        </ul>      </li>      <li>2012/3 〜        <strong>10xlab</strong></li>    </ul>  </li>  <li>最近markdown厨です    <ul>      <li>Mouいいですよ</li>      <li>今回のプレゼンもmarkdownで書いてます</li>    </ul>  </li></ul></article>'},
  {'slide' : '<article><h3 id="apachenginx--passengerunicorn">最近「apache,nginx × passenger,unicornのベンチをとってみた」というエントリを書きました。</h3><ul>  <li>その理由は・・・    <ol class="build">      <li>10xlabのプロジェクトでruby(rails)を使う</li>      <li><strong>railsでwebサーバーのベストな構成がわからない</strong>        <ul>          <li>apacheやnginx単体のbenchはあるけど、appサーバーも含めてとったベンチって意外とない</li>          <li>nginx + unicornを使ったら早くなったってエントリが結構あるけど、ほぼベンチ取ってない</li>        </ul>      </li>      <li>今ならまだ余裕があるからベンチとれる！</li>    </ol>  </li></ul></article>'},
  {'slide' : '<article><h1 id="section">ってことでベンチ取って比較してみました。</h1><ul>  <li>ただ、ベンチ取る前から、unicornを採用することはほぼ自分の中では決まっていました・・・</li></ul></article>'},
  {'slide' : '<article><h3 id="unicorn">unicornを採用することが決まっていた理由</h3><ul>  <li>主に運用する際のメリットが大きいからです。</li></ul><h4 class="green" id="section">メリット</h4><ul>  <li>forkを使ったmaster⇔worker構造を取る    <ul>      <li>copy on wirteによるメモリの効率化</li>      <li>masterがうまくworkerを管理しているので詰まることが少ない</li>    </ul>  </li>  <li>deploy時のダウンタイムが(ほぼ)ない    <ul>      <li>masterにHUPを送ると、新しいworkerをforkした後に、古いworkerと入れ替える</li>    </ul>  </li></ul></article>'},
  {'slide' : '<article><h3 id="section">構成</h3><image class="lefted" style="height: 600px" src="images/app_server_map.jpg" /></article>'},
  {'slide' : '<article><h3 id="section">構成</h3><image class="lefted" style="height: 600px" src="images/app_server_mod_hoge.jpg" /></article>'},
  {'slide' : '<article><h3 id="section">テストの環境</h3><ul>  <li>webアプリを動かしてるマシン<br />    <ul class="red">      <li><strong>KVM上の仮想マシンです</strong></li>    </ul>  </li></ul><table>  <thead>    <tr>      <th style="text-align: center">項目</th>      <th style="text-align: center">詳細</th>    </tr>  </thead>  <tbody>    <tr>      <td style="text-align: center">os</td>      <td style="text-align: center">fedora16</td>    </tr>    <tr>      <td style="text-align: center">CPU</td>      <td style="text-align: center">QEMU Virtual CPU version 0.15.1</td>    </tr>    <tr>      <td style="text-align: center">CPU数</td>      <td style="text-align: center">4</td>    </tr>    <tr>      <td style="text-align: center">memory</td>      <td style="text-align: center">2GB</td>    </tr>  </tbody></table></article>'},
  {'slide' : '<article><h3 id="section">テストの環境</h3><ul>  <li>ベンチとったマシン</li></ul><table>  <thead>    <tr>      <th style="text-align: center">項目</th>      <th style="text-align: center">詳細</th>    </tr>  </thead>  <tbody>    <tr>      <td style="text-align: center">os</td>      <td style="text-align: center">Ubuntu</td>    </tr>    <tr>      <td style="text-align: center">CPU</td>      <td style="text-align: center">Quad Core Xeon E3-1225</td>    </tr>    <tr>      <td style="text-align: center">CPU数</td>      <td style="text-align: center">4</td>    </tr>    <tr>      <td style="text-align: center">memory</td>      <td style="text-align: center">16GB</td>    </tr>  </tbody></table></article>'},
  {'slide' : '<article><h3 id="section">テストの環境</h3><ul>  <li>ライブラリのバージョン</li></ul><table>  <thead>    <tr>      <th style="text-align: center">version</th>      <th style="text-align: center">設定</th>    </tr>  </thead>  <tbody>    <tr>      <td style="text-align: center">apache</td>      <td style="text-align: center">2.2.21</td>    </tr>    <tr>      <td style="text-align: center">nginx</td>      <td style="text-align: center">1.0.12</td>    </tr>    <tr>      <td style="text-align: center">passenger</td>      <td style="text-align: center">3.0.11</td>    </tr>    <tr>      <td style="text-align: center">unicorn</td>      <td style="text-align: center">4.2.0</td>    </tr>  </tbody></table></article>'},
  {'slide' : '<article><h3 id="apache">apacheの設定</h3><pre><code>KeepAlive Off<br/><br/>StartServers       8<br/>MinSpareServers    5<br/>MaxSpareServers   20<br/>ServerLimit      256<br/>MaxClients       256<br/>MaxRequestsPerChild  4000<br/></code></pre></article>'},
  {'slide' : '<article><h3 id="nginx">nginxの設定</h3><pre><code>worker_processes  5;<br/>events {<br/>    worker_connections  1024;<br/>}<br/>http {<br/>    keepalive_timeout  0;<br/>}<br/></code></pre></article>'},
  {'slide' : '<article><h3 id="section">アプリ</h3><ul>  <li>    <p>今回のテストでは、Hello World!を表示させるだけのアプリを作りました</p>  </li>  <li>    <p>githubへ</p>  </li></ul></article>'},
  {'slide' : '<article><h1 id="section">結果発表</h1><ul>  <li>パフォーマンスは 秒間あたりに捌けるリクエスト数で比較しています</li></ul></article>'},
  {'slide' : '<article><h3 id="section">リクエスト数を1000で固定し、同時接続数を増やす</h3><h4 class="red" id="nginx--unicorn"><strong>nginx + unicornは動的ベージの表示では決して早くない</strong></h4><ul>  <li>    <image style="width: 700px" src="images/req_1000_4.jpg" />  </li></ul></article>'},
  {'slide' : '<article><h3 id="cpu24">CPUの2個、4個で比較</h3><h4 id="cpu">CPUが少ないと、違った傾向になるのでベンチとるときは注意</h4><ul>  <li>    <image style="width: 350px" src="images/req_1000_4.jpg" />    <image style="width: 350px" src="images/req_1000_2.png" />  </li>  <li>左がCPU4個、右がCPU2個の結果</li></ul></article>'},
  {'slide' : '<article><h3 id="section">同時接続数を固定して、リクエスト数を増やす</h3><h4 id="nginx">nginxは同時接続数が増えると性能が大きく上がる</h4><ul>  <li>    <image style="width: 360px" src="images/conc_10_4.jpg" />    <image style="width: 360px" src="images/conc_50_4.png" />  </li>  <li>左が同時接続数10、右が同時接続数50で固定した結果</li></ul></article>'},
  {'slide' : '<article><h3 id="starman">starmanと比べてみた</h3><h4 class="red" id="starman-1"><strong>starman爆速！！！</strong></h4><ul>  <li>@miyagawaと@kazuhoの作品だけあってパフォーマンスはハンパねぇ</li>  <li>    <image style="width: 600px" src="images/req_1000_perl_4.jpg" />  </li></ul></article>'},
  {'slide' : '<article><h3 id="section">静的ファイルの配信 リクエスト1000で固定</h3><h4 id="nginx">静的ファイルだと、圧倒的にnginxのほうがパフォーマンスが圧倒的</h4><ul>  <li>    <image style="width: 600px" src="images/apche_nginx_static.jpg" />  </li></ul></article>'},
  {'slide' : '<article><h3 id="section">その他補足</h3><ul>  <li>unicornのプロセス数が多すぎとtwitterで突っ込まれたのですが、減らしても特にパフォーマンスは変わりませんでした。</li>  <li>nginxでunix socketを使った場合、一割位性能があがります。</li>  <li>thinを使った場合、6000 req / secくらいのパフォーマンスがでました！</li></ul></article>'},
  {'slide' : '<article><h1 id="section">結論</h1><h3 id="nginx--unicorn">nginx + unicornは動的ページのパフォーマンスに関しては、ベストではない</h3><ul>  <li>軽量フレームワークかつ静的ページの配信が少ないのであれば、apache + passengerでも十分にパフォーマンスはでる</li>  <li>要は使いどころを間違えないこと</li></ul></article>'},
  {'slide' : '<article><h3 id="section">参照</h3><ul>  <li>下記の記事がunicornを丁寧に説明しています。    <ul>      <li><a href="http://techracho.jp/?p=2075">次世代RailsサーバーUnicornを使ってみた</a></li>    </ul>  </li>  <li>今回使ったソースの一部はgithubに上げてます    <ul>      <li><a href="https://github.com/SpringMT/hello_world_rack">hello_world_rack</a></li>    </ul>  </li>  <li>このプレゼンもgithubに上げてあります    <ul>      <li><a href="http://springmt.github.com/20120321_gaiax_lt/">「apache,nginx × passenger,unicornのベンチをとってみた」+ デザート</a></li>    </ul>  </li>  <li>ベンチ取るときに注意点(@kazuho)    <ul>      <li><a href="http://developer.cybozu.co.jp/kazuho/2009/12/tcp-064e.html">TCP通信ではデータの送信をまとめて行うべき、もうひとつの理由（＆ サーバのベンチマーク手法の話）</a></li>    </ul>  </li></ul></article>'},
  {'slide' : '<article><h3 id="nginx">nginxのパッチ情報</h3><ul>  <li>Memory disclosure with specially crafted backend responses    <ul>      <li>Severity: major</li>      <li>Not vulnerable: 1.1.17+, 1.0.14+</li>      <li>Vulnerable: 0.1.0-1.1.16</li>    </ul>  </li>  <li>メモリを盗み見られる脆弱性がある</li>  <li>新しいバージョン以外はほぼ対象なので、使ってるかたはパッチ当てましょう</li>  <li><a href="http://nginx.org/en/security_advisories.html">nginx security advisories</a></li></ul></article>'},
  {'slide' : '<article><h1 id="section">次回のネタ</h1><ul>  <li>大規模開発でのgit運用術</li>  <li>fluentd</li>  <li>gangliaで捗ったこと</li>  <li>KVM入門</li>  <li>Mysqlのあれこれ</li></ul></article>'},
]
